<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MaterialTracking.PageViews.PageDelivery"
             Title="{Binding Title}"
            IconImageSource="Shipped.png"
             BackgroundColor="{StaticResource BlueBackDark}"
             xmlns:fontaws="clr-namespace:SysFont">
    <Grid  RowDefinitions="45,*" IsVisible="true">
        <!--TaskBar-->
        <StackLayout Orientation="Horizontal" BackgroundColor="{StaticResource Gray}">
            <SearchBar x:Name="searchBar" 
                                Placeholder="{Binding SearchBar_Holder}" 
                                PlaceholderColor="Gray"
                                BackgroundColor="Transparent"
                                TextChanged="Search_TextChange"   
                                TextColor="{StaticResource BlueBackDark}"/>
            <!--<BoxView BackgroundColor="{StaticResource BlueSea}" WidthRequest="1" HorizontalOptions="Center" VerticalOptions="Center"/>-->
            <!--<ScrollView Orientation="Horizontal">
                <StackLayout Orientation="Horizontal">
                    <StackLayout Orientation="Horizontal">
                        
                        <RadioButton  IsEnabled="{Binding Ac_enb}" Content="{Binding rb_AC_Content}"  IsChecked="{Binding Ac_checked,Mode=TwoWay}" CheckedChanged="On_FilterChange_Event"/>
                       
                        <RadioButton IsEnabled="{Binding Ns_enb}" Content="{Binding rb_NS_Content}" IsChecked="{Binding Ns_checked,Mode=TwoWay}" CheckedChanged="On_FilterChange_Event"/>
                      
                        <RadioButton IsEnabled="{Binding St_enb}" Content="{Binding rb_ST_Content}" IsChecked="{Binding St_checked ,Mode=TwoWay}" CheckedChanged="On_FilterChange_Event"/>
                    </StackLayout>
        
                </StackLayout>
            </ScrollView>-->
            <BoxView BackgroundColor="{StaticResource BlueSea}" WidthRequest="1" HorizontalOptions="Center" VerticalOptions="Center"/>
            <!--  CommandParameter="{Binding Source={x:Reference gv}}"-->
            <Button Text="{Static fontaws:Brands.Warehouse}"
                            FontFamily="aws900"
                            FontSize="Large"
                            BackgroundColor="Transparent" 
                            TextColor="{StaticResource BlueSea}"          
                            Margin="0,2,0,2" 
                    
                            Command="{Binding Cmd_Combine}" 
                           CommandParameter="{Binding Source={x:Reference gv_deliverry}}"
                           Clicked="Confirm_Clicked"
                         x:Name="btn_Confirm" />

            <Button Text="{Static fontaws:Brands.Undo}"
                            FontFamily="aws900"
                            FontSize="Large"
                            BackgroundColor="Transparent" 
                            TextColor="{StaticResource BlueSea}"   
                      
                            Margin="5,2,0,2" 
                    Clicked="Refresh_Clicked"
                                     
                          
                           />

            

            <BoxView BackgroundColor="{StaticResource BlueSea}" WidthRequest="1" HorizontalOptions="Center" VerticalOptions="Center"/>
            <Label Text="{Binding Countitems}" 
                   HorizontalOptions="Center" 
                   VerticalOptions="Center"
                   FontSize="18"
                   Margin="30 ,0 ,0 ,0" 
                   TextColor="Gray"/>
        </StackLayout>
        <!--DataGrid-->
        <Grid Grid.Row="1"  RowDefinitions="37,*">
            <Grid BackgroundColor="{StaticResource BlueBacklight}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width=".5*" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                    <!--<ColumnDefinition Width=".7*" />
                    <ColumnDefinition Width="1*" />-->
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />


                </Grid.ColumnDefinitions>

                <CheckBox IsChecked="False" Color="{StaticResource Gray}" CheckedChanged="Checked_Change"/>

                <Label Text="{Binding Column_RY}" Grid.Column="1" FontSize="16" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" TextColor="White"/>
                <Label Text="{Binding Column_Art}" Grid.Column="2" FontSize="16" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" TextColor="White"/>
                <Label Text="{Binding Column_Comp}" Grid.Column="3" FontSize="16" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" TextColor="White"/>
                <Label Text="{Binding Column_Model}" Grid.Column="4" FontSize="16" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" TextColor="White"/>
                <Label Text="{Binding Column_Qty}" Grid.Column="5" FontSize="16" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" TextColor="White"/>
              
                <Picker Title="{Binding Column_Date}" 
                        ItemsSource="{Binding Prodate_data}"
                        TitleColor="LightGreen"
                        x:Name="DatePickerFilter"
                        
                        
                        
                        SelectedIndexChanged="On_SelectProDate_Change_Event" 
                        
                        Grid.Column="6" FontSize="16"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="Center"
                        VerticalTextAlignment="Center" 
                        TextColor="White"
                        
                        Margin="0"
                        />

                <!--SelectedItem="{Binding SelectedProdate, Mode=TwoWay}"
                        
                        SelectedIndex="{Binding SelectedProdateIndex , Mode=TwoWay}"-->
            </Grid>
            <CollectionView Grid.Row="1" ItemsSource="{Binding Data}"  x:Name="gv_deliverry" >


                <CollectionView.ItemsLayout>

                    <LinearItemsLayout Orientation="Vertical" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <!-- refine column name in CollectionView -->


                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />

                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>

                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width=".5*" />
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="1*" />
                                <!--<ColumnDefinition Width=".7*" />
                                <ColumnDefinition Width="1*" />-->
                                <ColumnDefinition Width="1*" />

                                <ColumnDefinition Width="1*" />


                            </Grid.ColumnDefinitions>
                            <CheckBox IsChecked="{Binding Sel }" Color="{StaticResource Gray}"/>

                            <Label  Text="{Binding RY}" TextColor="{Binding ColorStatus}" Grid.Column="1" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
                            <Label Text="{Binding Art}" TextColor="{Binding ColorStatus}" Grid.Column="2" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
                            <Label Text="{Binding CompVN}" TextColor="{Binding ColorStatus}" Grid.Column="3" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
                            <Label Text="{Binding ModelName}" TextColor="{Binding ColorStatus}" Grid.Column="4" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
                            <Label Text="{Binding TarQty}" TextColor="{Binding ColorStatus}" Grid.Column="5" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
                            <Label Text="{Binding ProdDate}" TextColor="{Binding ColorStatus}" Grid.Column="6" FontSize="16"  HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>

                        </Grid>

                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
        <Grid IsVisible="{Binding IsBusy}" 
                  Grid.RowSpan="2"
                  HorizontalOptions="Fill"
                  VerticalOptions="Fill" 
                  BackgroundColor="Gray" 
                  Opacity="0.7">
            <StackLayout HorizontalOptions="Center" VerticalOptions="Center">

                <ActivityIndicator IsVisible="{Binding IsBusy}" 
                                   IsRunning="{Binding IsBusy}" 
                                   VerticalOptions="Center" 
                                   HorizontalOptions="Center" 
                                   HeightRequest="40" 
                                   WidthRequest="40"
                                   Color="{StaticResource Error}"/>
                <Label Text="Please Wait..." FontSize="Header" x:Name="lbl_Plswait"/>
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>